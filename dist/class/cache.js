import{debugLog as e}from"../utils/index.js";class t{prefix="";constructor(e){this.prefix=e}handlePrefix=e=>""===this.prefix?e:`${this.prefix}${e}`;getItem=e=>localStorage.getItem(this.handlePrefix(e));setItem=(e,t)=>localStorage.setItem(this.handlePrefix(e),t);removeItem=e=>localStorage.removeItem(this.handlePrefix(e));getStorage=t=>{try{const e=this.getItem(t);if(e){const r=JSON.parse(e);return r.createTime?r.value:(this.clearStorage(t),null)}return null}catch(r){return e("error",r),this.clearStorage(t),null}};setStorage=(t,r)=>{try{const e=+new Date;this.setItem(t,JSON.stringify({value:r,createTime:e}))}catch(r){e("error",r),this.clearStorage(t)}};clearStorage=t=>{try{this.removeItem(t)}catch(t){e("error",t)}};getStorageExp=t=>{try{const e=this.getItem(t);if(e){const r=JSON.parse(e),a=r.expireTime,i=a<+new Date;return!a||i?(this.clearStorage(t),null):r.value}return null}catch(r){return e("error",r),this.clearStorage(t),null}};setStorageExp=(t,r,a)=>{try{if([t,r,a].includes(void 0))return void e("error","请检查传入的参数！");const i=+new Date,o=i+60*a*60*1e3;this.setItem(t,JSON.stringify({value:r,createTime:i,expireTime:o}))}catch(r){e("error",r),this.clearStorage(t)}}}export{t as CacheModel};
